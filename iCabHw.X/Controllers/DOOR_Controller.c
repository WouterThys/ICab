#include <xc.h>

#include "DOOR_Controller.h"

/*******************************************************************************
 *          DEFINES
 ******************************************************************************/

/*******************************************************************************
 *          MACRO FUNCTIONS
 ******************************************************************************/

/*******************************************************************************
 *          VARIABLES
 ******************************************************************************/
static Door doors[DOOR_COUNT];

/*******************************************************************************
 *          BASIC FUNCTIONS
 ******************************************************************************/

/*******************************************************************************
 *          DRIVER FUNCTIONS
 ******************************************************************************/
void C_DOOR_Init() {
    // Ports
    
    // Doors
    int d;
    for (d = 0; d < DOOR_COUNT; d++) {
        doors[d].id = d;
        doors[d].is_locked = true;
        doors[d].is_open = false;
    }
}

void C_DOOR_Lock(uint8_t id) {
    int d;
    for (d = 0; d < DOOR_COUNT; d++) {
        if (doors[d].id == id) {
            doors[d].is_locked = true;
        }
    }
}
    
void C_DOOR_LockAll() {
    int d;
    for (d = 0; d < DOOR_COUNT; d++) {
        doors[d].is_locked = true;
    }
}